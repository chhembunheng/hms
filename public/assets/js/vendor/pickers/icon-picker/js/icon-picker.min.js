!(function (i) {
    "use strict";
    let a = "undefined" != typeof fontAwesome ? fontAwesome : {},
        e = (i = "Insert") => `
    <div class="aim-modal" id="aim-modal" aria-modal="true" role="dialog">
      <div class="aim-modal--content">
        <div class="aim-modal--header">
          <div class="aim-modal--header-logo-area">
            <span class="aim-modal--header-logo-title">Icon Picker</span>
          </div>
          <button type="button" class="aim-modal--header-close-btn" aria-label="Close">
            <i class="fas fa-times" title="Close"></i>
          </button>
        </div>
        <div class="aim-modal--body">
          <div id="aim-modal--sidebar" class="aim-modal--sidebar">
            <div class="aim-modal--sidebar-tabs"></div>
          </div>
          <div id="aim-modal--icon-preview-wrap" class="aim-modal--icon-preview-wrap">
            <div class="aim-modal--icon-search">
              <input type="search" placeholder="Filter by name..." aria-label="Filter icons"/>
              <i class="fas fa-search" aria-hidden="true"></i>
            </div>
            <div class="aim-modal--icon-preview-inner">
              <div id="aim-modal--icon-preview"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
    i.fn.iconPicker = function (t) {
        let l = i.extend(!0, { onClick: "", iconLibrary: a, insertButtonText: "Insert", debounceMs: 120 }, t || {});
        return l.onClick
            ? this.each(function () {
                  var a, t, n;
                  let s = i(this),
                      o = i(l.onClick).first();
                  if (!s.length || !o.length) return;
                  let c = [{ title: "all icons", "list-icon": "fas fa-star-of-life", "library-id": "all" }],
                      d = i(e(l.insertButtonText)),
                      r = d.find(".aim-modal--sidebar-tabs"),
                      m = d.find("#aim-modal--icon-preview"),
                      f = d.find(".aim-modal--icon-search input"),
                      u = [];
                  i.each(l.iconLibrary, function (a, e) {
                      let t = (a || "").replace("-", " ");
                      i.each(e, function (i, a) {
                          c.push({
                              title: `${t} - ${i}`,
                              "list-icon":
                                  a["list-icon"] && a["list-icon"].length ? a["list-icon"] : "far fa-dot-circle",
                              "library-id": a["icon-style"] && a["icon-style"].length ? a["icon-style"] : "all",
                          }),
                              u.push(
                                  (function i(a) {
                                      let e = a["icon-style"],
                                          t = a.prefix;
                                      return a.icons
                                          .map((i) => {
                                              let a = i.replace(/-/g, " ");
                                              return `
        <div class="aim-icon-item" data-library-id="${e}" data-filter="${i}">
          <button type="button" class="aim-icon-item-inner" title="${i}" aria-label="${a}">
            <i class="${t + i}"></i>
            <div class="aim-icon-item-name" title="${i}">${a}</div>
          </button>
        </div>
      `;
                                          })
                                          .join("");
                                  })(a)
                              );
                      });
                  }),
                      r.html(
                          (a = c)
                              .map((i) => {
                                  let a = "all" === i["library-id"] ? "aesthetic-active" : "";
                                  return `
        <div class="aim-modal--sidebar-tab-item ${a}" data-library-id="${i["library-id"]}">
          <i class="${i["list-icon"]}"></i>${i.title}
        </div>
      `;
                              })
                              .join("")
                      ),
                      m.html(u.join(""));
                  let h = m.find(".aim-icon-item");
                  o.on("click", function () {
                      s.find("#aim-modal").length || s.append(d),
                          d.addClass("aim-open").removeClass("aim-close"),
                          requestAnimationFrame(() => f.trigger("focus"));
                  }),
                      d.on("click", ".aim-modal--header-close-btn", p),
                      d.on("click", function (i) {
                          i.target === d[0] && p();
                      }),
                      d.on("keydown", function (i) {
                          "Escape" === i.key && (i.stopPropagation(), p());
                      }),
                      r.on("click", ".aim-modal--sidebar-tab-item", function () {
                          let a = i(this);
                          a.hasClass("aesthetic-active") ||
                              (r.find(".aesthetic-active").removeClass("aesthetic-active"),
                              a.addClass("aesthetic-active"));
                          let e = a.data("libraryId") || "all";
                          (function i(a) {
                              let e = "all" === a;
                              h.each(function () {
                                  let i = e || this.dataset.libraryId === a;
                                  this.style.display = i ? "" : "none";
                              });
                          })(e);
                      });
                  let v;
                  function p() {
                      d.addClass("aim-close").removeClass("aim-open");
                  }
                  f.on(
                      "keyup",
                      ((t = function () {
                          let i = (f.val() || "").toString().trim().toLowerCase();
                          (function i(a) {
                              if (!a) {
                                  h.each(function () {
                                      this.style.display = "";
                                  });
                                  return;
                              }
                              h.each(function () {
                                  let i = (this.dataset.filter || "").toLowerCase();
                                  this.style.display = i.includes(a) ? "" : "none";
                              });
                          })(i);
                      }),
                      (n = l.debounceMs),
                      function () {
                          let i = this,
                              a = arguments;
                          clearTimeout(v),
                              (v = setTimeout(function () {
                                  t.apply(i, a);
                              }, n));
                      })
                  ),
                      m.on("click", ".aim-icon-item", function () {
                          h.removeClass("aesthetic-selected");
                          let a = i(this).addClass("aesthetic-selected"),
                              e = a.find("i").attr("class") || "",
                              v = s.find("i").first(),
                              t = s.find("input").first();
                          t.length && t.val(e) && v.attr("class", e), p();
                      }),
                      s.data("iconPickerDestroy", function () {
                          o.off("click"), d.remove();
                      });
              })
            : this;
    };
})(jQuery);
