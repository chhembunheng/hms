/* ========== Theme & Resets ========== */
:root {
  --aim-bg:        #0b0f14aa;        /* backdrop */
  --aim-surface:   #f7f8fa;
  --aim-surface-2: #ffffff;
  --aim-text:      #27313a;
  --aim-muted:     #6d7882;
  --aim-border:    #e6e9ec;
  --aim-primary:   #00213e;
  --aim-accent:    #0d2c48;
  --aim-success:   #39b54a;
  --aim-shadow:    0 10px 30px rgba(0,0,0,.12);
}

*,
*::before,
*::after { box-sizing: border-box; }

/* Buttons/inputs accessibility */
:focus-visible { outline: 2px solid var(--aim-primary); outline-offset: 2px; }

/* ========== Wrapper (demo styles) ========== */
.icon-picker-wrap {
  margin-inline: auto;
  margin-top: 10%;
  text-align: center;
}

button.select-icon {
  padding: 0.9rem 1.2rem;
  border-radius: 8px;
  background: var(--aim-primary);
  color: #fff;
  font-size: 1.125rem;
  line-height: 1;
  border: none;
  cursor: pointer;
  box-shadow: var(--aim-shadow);
  transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
}
button.select-icon:hover { transform: translateY(-1px); }
button.select-icon:active { transform: translateY(0); opacity:.9; }

/* inline picked preview (unchanged) */
.icon-picker-wrap ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: inline-flex;
  position: relative;
  gap: 8px;
}
.icon-picker-wrap ul li {
  border: 2px solid var(--aim-border);
  font-size: 20px;
  cursor: pointer;
  padding: 6px;
  background: var(--aim-surface-2);
}
.icon-picker-wrap ul li i {
  font-size: 56px;
  line-height: 1;
}
.icon-picker-wrap ul li + li { border-left: 0; }

/* ========== Modal Visibility ========== */
.aim-close { opacity: 0; visibility: hidden; transition: opacity .2s ease, visibility .2s step-end; }
.aim-open  { opacity: 1; visibility: visible; transition: opacity .2s ease; }

/* ========== Modal Shell ========== */
.aim-modal {
  position: fixed; inset: 0;
  background: var(--aim-bg);
  z-index: 9999;
  user-select: none;
  display: grid;
  place-items: center;
  padding: 2vh 2vw;
}

.aim-modal .aim-modal--content {
  background: var(--aim-surface);
  color: var(--aim-text);
  border-radius: 12px;
  box-shadow: var(--aim-shadow);
  width: min(1200px, 96vw);
  height: clamp(520px, 85vh, 780px);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, "Noto Sans", "Liberation Sans", sans-serif;
}

/* ========== Header ========== */
.aim-modal--header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--aim-border);
}
.aim-modal--header-logo-title {
  line-height: 1; text-transform: uppercase; font-weight: 800; letter-spacing: .04em;
}
.aim-modal--header-close-btn {
  cursor: pointer; border: none; background: transparent; color: var(--aim-muted);
}
.aim-modal--header-close-btn i { font-size: 22px; }

/* ========== Body Layout ========== */
.aim-modal--body {
  display: grid;
  grid-template-columns: clamp(200px, 24%, 280px) 1fr;
  gap: 0;
  min-height: 0; /* allow children to scroll */
  flex: 1 1 auto;
}

/* Sidebar */
.aim-modal--sidebar {
  background: color-mix(in srgb, var(--aim-surface-2), transparent 10%);
  border-right: 1px solid var(--aim-border);
  overflow: auto;
}
.aim-modal--sidebar-tabs { padding-block: 8px; }
.aim-modal--sidebar-tab-item {
  padding: 12px 14px 12px 22px;
  font-size: 14px;
  color: var(--aim-muted);
  display: flex; align-items: center; gap: 12px;
  cursor: pointer;
  position: relative;
  transition: background .15s ease, color .15s ease;
}
.aim-modal--sidebar-tab-item:hover { background: color-mix(in srgb, var(--aim-primary), transparent 92%); }
.aim-modal--sidebar-tab-item i { font-size: 18px; color: var(--aim-muted); }
.aim-modal--sidebar-tab-item.aesthetic-active::before {
  content: "";
  position: absolute; inset: 0 0 0 0;
  border-left: 3px solid var(--aim-accent);
}
.aim-modal--sidebar-tab-item.aesthetic-active,
.aim-modal--sidebar-tab-item.aesthetic-active i { color: var(--aim-accent); }

/* Preview panel */
.aim-modal--icon-preview-wrap {
  display: flex; flex-direction: column;
  padding: 18px 18px 0;
  min-width: 0; /* fix overflow on narrow screens */
  overflow: auto;
  flex: 1 1 auto;
  min-height: 0;
}
.aim-modal--icon-search {
  position: relative;
}
.aim-modal--icon-search input {
  width: 100%;
  padding: 10px 40px 10px 12px;
  background: var(--aim-surface-2);
  border: 1px solid var(--aim-border);
  border-radius: 8px;
  color: var(--aim-text);
}
.aim-modal--icon-search input::placeholder { font-style: italic; color: var(--aim-muted); }
.aim-modal--icon-search i {
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  color: var(--aim-muted);
}

/* Scroll area for icons */
.aim-modal--icon-preview-inner {
  margin-top: 16px; 
  padding-bottom: 16px;
}

/* Responsive auto-fit grid */
#aim-modal--icon-preview {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 14px;
}

/* Icon Card */
.aim-icon-item {
  background: var(--aim-surface-2);
  border-radius: 10px;
  border: 1px solid var(--aim-border);
  transition: box-shadow .15s ease, transform .06s ease, border-color .15s ease;
  box-shadow: 0 1px 4px rgba(0,0,0,.04);
  overflow: hidden;
}
.aim-icon-item:hover { box-shadow: var(--aim-shadow); transform: translateY(-1px); }
.aim-icon-item.aesthetic-selected { border-color: var(--aim-accent); box-shadow: 0 0 0 3px color-mix(in srgb, var(--aim-accent), transparent 70%); }

.aim-icon-item-inner {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
  padding: 14px 10px;
  background: transparent; border: 0; width: 100%; cursor: pointer;
}
.aim-icon-item-inner i,
.aim-icon-item__icon {
  font-size: 26px; color: var(--aim-text);
}
.aim-icon-item-name {
  color: var(--aim-muted);
  font-size: 12px;
  max-width: 100%;
  white-space: nowrap; text-overflow: ellipsis; overflow: hidden;
  text-transform: capitalize;
}

/* ========== Responsive tweaks ========== */
@media (max-width: 900px) {
  .aim-modal--body { grid-template-columns: 1fr; }
  .aim-modal--sidebar { display: none; }
  #aim-modal--icon-preview { grid-template-columns: repeat(auto-fill, minmax(104px, 1fr)); }
}

/* ========== Motion preferences ========== */
@media (prefers-reduced-motion: reduce) {
  .aim-close, .aim-open,
  .aim-icon-item, button.select-icon { transition: none !important; }
}

/* ========== Optional: arrow indicator cleanup ========== */
.aim-indicator {
  font-size: 56px;
  position: absolute;
  left: 50%; top: -90px; transform: translateX(-50%);
  animation: aim-indicator 2s ease-in-out infinite;
  color: var(--aim-accent);
}
@keyframes aim-indicator { 0%{top:-100px}50%{top:-72px}100%{top:-100px} }
