name: PR Alert

on:
  pull_request:
    types: [opened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TG_BOT_TOKEN }}/sendMessage" \
          -d chat_id=${{ secrets.TG_CHAT_ID }} \
          -d parse_mode=Markdown \
          -d text=$'ğŸ”€ *New PR is up*\n\nğŸ“Œ *${{ github.event.pull_request.title }}*\nğŸ‘¤ By: ${{ github.actor }}\nğŸŒ¿ `${{ github.head_ref }}` â†’ `${{ github.base_ref }}`\n\nğŸ’¬ Changed files: ${{ github.event.pull_request.changed_files }}\nğŸ“ +${{ github.event.pull_request.additions }} -${{ github.event.pull_request.deletions }}\n\nğŸ”— [View PR](${{ github.event.pull_request.html_url }})\n\nğŸ‘€ Review time, legends.'


env:
  TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
  TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
  TG_TOPIC_ID: ${{ secrets.TG_TOPIC_ID }}
